<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8" />
<title>Sheriff Labrador ‚Äì B·∫Øn Sao Ng·ªØ Ph√°p</title>
<style>
  body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: radial-gradient(circle at top, #001f3f, #000);
    color: white;
    text-align: center;
  }
  h1 { margin: 10px 0; }
  #hud { display:flex; justify-content:space-around; margin:8px 0; }
  #game {
    background: linear-gradient(#001f3f, #000);
    display:block;
    margin: 0 auto;
    border-radius: 12px;
  }
  #info {
    margin: 10px;
    min-height: 28px;
  }
  .tip { color:#ffd700; font-size:14px; }
</style>
</head>
<body>

<h1>üê∂‚≠ê Sheriff Labrador ‚Äì B·∫Øn Sao Ng·ªØ Ph√°p</h1>
<div id="hud">
  <div>ƒêi·ªÉm: <span id="score">0</span></div>
  <div>C√¢u: <span id="question"></span></div>
</div>

<canvas id="game" width="700" height="420"></canvas>

<div id="info"></div>
<div class="tip">Click v√†o ng√¥i sao c√≥ ƒë√°p √°n ƒë√∫ng: THIS / THAT / THESE / THOSE</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

const questions = [
  { q: "___ is my badge. (g·∫ßn, s·ªë √≠t)", a: "this" },
  { q: "___ is the mountain. (xa, s·ªë √≠t)", a: "that" },
  { q: "___ are my puppies. (g·∫ßn, s·ªë nhi·ªÅu)", a: "these" },
  { q: "___ are the cows. (xa, s·ªë nhi·ªÅu)", a: "those" },
  { q: "___ is my hat. (g·∫ßn, s·ªë √≠t)", a: "this" },
  { q: "___ are the stars. (xa, s·ªë nhi·ªÅu)", a: "those" },
  { q: "___ is my chair. (g·∫ßn, s·ªë √≠t)", a: "this" },
  { q: "___ are my books. (g·∫ßn, s·ªë nhi·ªÅu)", a: "these" },
  { q: "___ is that tower. (xa, s·ªë √≠t)", a: "that" },
  { q: "___ are the mountains. (xa, s·ªë nhi·ªÅu)", a: "those" }
];

function explain(word) {
  switch(word) {
    case "this": return "This d√πng cho v·∫≠t ·ªü g·∫ßn, s·ªë √≠t.";
    case "that": return "That d√πng cho v·∫≠t ·ªü xa, s·ªë √≠t.";
    case "these": return "These d√πng cho v·∫≠t ·ªü g·∫ßn, s·ªë nhi·ªÅu.";
    case "those": return "Those d√πng cho v·∫≠t ·ªü xa, s·ªë nhi·ªÅu.";
    default: return "";
  }
}

let current = 0;
let score = 0;
let stars = [];

function newRound() {
  stars = [];
  document.getElementById("question").innerText = questions[current].q;
  document.getElementById("info").innerText = "";

  const words = ["this","that","these","those"];
  for (let i=0;i<4;i++){
    stars.push({
      x: 100 + i*150,
      y: -Math.random()*200,
      r: 28,
      word: words[i],
      speed: 0.4 + Math.random()*0.6,
      paused: true,
      pause: 10000,
      pauseStart: Date.now()
    });
  }
}

function drawStar(s) {
  ctx.beginPath();
  ctx.arc(s.x, s.y, s.r, 0, Math.PI*2);
  ctx.fillStyle = "#ffd700";
  ctx.fill();
  ctx.fillStyle = "#000";
  ctx.font = "bold 14px Arial";
  ctx.textAlign = "center";
  ctx.fillText(s.word.toUpperCase(), s.x, s.y+5);
}

function update() {
  ctx.clearRect(0,0,canvas.width,canvas.height);
  const now = Date.now();
  stars.forEach(s=>{
    if (s.paused) {
      if (now - s.pauseStart >= s.pause) {
        s.paused = false;
      }
    } else {
      s.y += s.speed;
      if (s.y > canvas.height+40) {
        s.y = -20;
        s.paused = true;
        s.pauseStart = Date.now();
      }
    }
    drawStar(s);
  });
  requestAnimationFrame(update);
}

canvas.addEventListener("click", function(e){
  const rect = canvas.getBoundingClientRect();
  const mx = e.clientX - rect.left;
  const my = e.clientY - rect.top;

  stars.forEach(s=>{
    const d = Math.sqrt((mx-s.x)**2 + (my-s.y)**2);
    if (d < s.r) {
      checkAnswer(s.word);
    }
  });
});

function checkAnswer(choice) {
  const correct = questions[current].a;
  if (choice === correct) {
    score++;
    document.getElementById("info").innerText = "üéâ ƒê√∫ng r·ªìi! Sheriff Labrador r·∫•t t·ª± h√†o!";
  } else {
    document.getElementById("info").innerText = "‚ùå Sai r·ªìi! ƒê√°p √°n ƒë√∫ng l√† " + correct.toUpperCase() + ". " + explain(correct);
  }
  document.getElementById("score").innerText = score;

  current++;
  if (current < questions.length) {
    setTimeout(newRound, 1200);
  } else {
    setTimeout(()=>{
      document.getElementById("question").innerText = "Ho√†n th√†nh nhi·ªám v·ª•!";
      document.getElementById("info").innerText = "‚≠ê T·ªïng ƒëi·ªÉm: " + score + " / " + questions.length;
    },1200);
  }
}

newRound();
update();
</script>

</body>
</html>

