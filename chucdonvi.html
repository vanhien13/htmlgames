<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kh·ªßng Long Ph√¢n Lo·∫°i: Ch·ª•c v√† ƒê∆°n V·ªã</title>
    <link href="https://fonts.googleapis.com/css2?family=Patrick+Hand&display=swap" rel="stylesheet">
    <style>
        :root {
            --tens-color: #FF9800; /* M√†u cam cho h√†ng ch·ª•c */
            --ones-color: #2196F3; /* M√†u xanh d∆∞∆°ng cho h√†ng ƒë∆°n v·ªã */
            --bg-color: #8B4513;
            --text-color: #fff;
            --panel-bg: rgba(255, 248, 220, 0.95); /* M√†u kem s√°ng */
        }

        body {
            font-family: 'Patrick Hand', cursive, sans-serif;
            background-color: var(--bg-color);
            /* S·ª≠ d·ª•ng l·∫°i n·ªÅn r·ª´ng ti·ªÅn s·ª≠ */
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100%25' height='100%25' viewBox='0 0 1600 800'%3E%3Cdefs%3E%3ClinearGradient id='a' gradientUnits='userSpaceOnUse' x1='800' y1='0' x2='800' y2='800'%3E%3Cstop offset='0' stop-color='%238B4513'/%3E%3Cstop offset='1' stop-color='%235E2C0B'/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect fill='url(%23a)' width='1600' height='800'/%3E%3Cg fill-opacity='0.4'%3E%3Cpath fill='%233E1F07' d='M-168 544.3c32.5 8.3 75.3 37.8 117.3 60.5 42 22.7 84 39 143 34.8 59-4.2 135-29.3 194-37.8 59-8.5 101-1.7 167 23.5 66 25.2 156 68.8 213 80.7 57 11.8 81-8.5 139-32.8 58-24.3 150-52.2 216-56.3 66-4.2 106 17.7 164 47 58 29.3 134 66.3 190 77.3 56 11 92-9.2 158-41.2 66-32 182-76 244-84 62-8 100 14 138 36 38 22 76 44 114 66 38 22 76 44 114 66 38 22 76 44 114 66 38 22 76 44 114 66L3468 1200H-168V544.3z'/%3E%3C/g%3E%3C/svg%3E");
            background-size: cover;
            color: #333;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 10px;
        }

        #game-container {
            background-color: var(--panel-bg);
            border-radius: 25px;
            padding: 25px;
            text-align: center;
            border: 6px solid #5D4037;
            box-shadow: 0 10px 25px rgba(0,0,0,0.6);
            max-width: 700px;
            width: 90%;
            margin-top: 20px;
            position: relative;
        }

        h1 {
            font-size: 2.2em;
            margin: 0 0 15px 0;
            color: #D84315;
        }

        #score-bar {
            font-size: 1.4em;
            margin-bottom: 20px;
            color: #5D4037;
            font-weight: bold;
        }

        /* Khu v·ª±c hi·ªÉn th·ªã s·ªë v√† kh·ªëi h√¨nh */
        #display-area {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 30px;
            margin-bottom: 25px;
            padding: 15px;
            background-color: #FFF8E1;
            border-radius: 15px;
            border: 3px dashed #8D6E63;
        }

        #big-number {
            font-size: 6em;
            font-weight: bold;
            letter-spacing: 5px;
        }
        
        /* T√¥ m√†u ri√™ng cho s·ªë ch·ª•c v√† ƒë∆°n v·ªã ƒë·ªÉ d·ªÖ nh√¨n */
        .tens-digit-txt { color: var(--tens-color); }
        .ones-digit-txt { color: var(--ones-color); }

        #visual-blocks {
            display: flex;
            align-items: flex-end;
            gap: 10px;
        }

        .tens-group { display: flex; gap: 5px; }
        .ten-bar {
            width: 12px; height: 80px;
            background-color: var(--tens-color);
            border: 2px solid #E65100;
            display: grid; grid-template-rows: repeat(10, 1fr);
        }
        .ten-bar div { border-bottom: 1px solid #E65100; }

        .ones-group { display: flex; flex-wrap: wrap; gap: 5px; width: 40px; justify-content: flex-start;}
        .one-cube {
            width: 15px; height: 15px;
            background-color: var(--ones-color);
            border: 2px solid #1565C0;
        }

        /* Khu v·ª±c c√¢u h·ªèi v√† Kh·ªßng long */
        #question-section {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
        }
        #dino-avatar { font-size: 5em; margin-right: 15px; }
        #question-text {
            font-size: 2em;
            background-color: #fff;
            padding: 15px 25px;
            border-radius: 20px;
            border: 3px solid #8D6E63;
            position: relative;
        }
        /* T·∫°o m≈©i t√™n cho bong b√≥ng h·ªôi tho·∫°i */
        #question-text::after {
            content: ''; position: absolute; left: -15px; top: 50%;
            border-top: 10px solid transparent; border-bottom: 10px solid transparent; 
            border-right: 15px solid #8D6E63; transform: translateY(-50%);
        }
        .highlight-tens { color: var(--tens-color); font-weight: bold; font-size: 1.2em; }
        .highlight-ones { color: var(--ones-color); font-weight: bold; font-size: 1.2em; }

        /* Khu v·ª±c ƒë√°p √°n */
        #answers-container {
            display: flex; justify-content: center; gap: 25px;
        }

        .egg-btn {
            width: 90px; height: 110px;
            background-color: #FFECB3;
            background-image: radial-gradient(circle at 40% 40%, #fff, #FFECB3 60%, #FFC107 90%);
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%; /* H√¨nh qu·∫£ tr·ª©ng */
            border: 4px solid #FFA000;
            font-size: 3em; color: #5D4037; font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s, background-color 0.2s;
            display: flex; justify-content: center; align-items: center;
            font-family: 'Patrick Hand', cursive, sans-serif;
            box-shadow: 0 6px #B38F00;
        }
        .egg-btn:hover { transform: translateY(-5px) scale(1.05); background-color: #FFF9C4;}
        .egg-btn:active { transform: translateY(2px); box-shadow: 0 2px #B38F00;}
        .egg-btn.disabled { opacity: 0.7; cursor: not-allowed; pointer-events: none;}

        #message { min-height: 1.5em; font-size: 1.8em; margin-top: 15px; font-weight: bold; }
        .correct { color: #2E7D32; } .wrong { color: #C62828; }

    </style>
</head>
<body>

    <div id="game-container">
        <h1>Kh·ªßng Long Ph√¢n Lo·∫°i: Ch·ª•c & ƒê∆°n V·ªã</h1>
        <div id="score-bar">‚≠ê ƒêi·ªÉm: <span id="score">0</span></div>

        <div id="display-area">
            <div id="big-number">
                <span class="tens-digit-txt">3</span><span class="ones-digit-txt">5</span>
            </div>
            <div id="visual-blocks">
                </div>
        </div>

        <div id="question-section">
            <div id="dino-avatar">ü¶ñ</div>
            <div id="question-text">
                S·ªë n√†y c√≥ m·∫•y <span>CH·ª§C</span>?
            </div>
        </div>

        <div id="answers-container">
            <button class="egg-btn">3</button>
            <button class="egg-btn">5</button>
            <button class="egg-btn">8</button>
        </div>

        <div id="message"></div>
    </div>

    <script>
        // C√°c bi·∫øn to√†n c·ª•c
        let currentNumber;
        let tensDigit, onesDigit;
        let questionType; // 'tens' ho·∫∑c 'ones'
        let score = 0;
        let isAnswering = false;

        // L·∫•y c√°c ph·∫ßn t·ª≠ DOM
        const bigNumberTensEl = document.querySelector('.tens-digit-txt');
        const bigNumberOnesEl = document.querySelector('.ones-digit-txt');
        const visualBlocksEl = document.getElementById('visual-blocks');
        const questionTextEl = document.getElementById('question-text');
        const dinoAvatarEl = document.getElementById('dino-avatar');
        const answerBtns = document.querySelectorAll('.egg-btn');
        const messageEl = document.getElementById('message');
        const scoreEl = document.getElementById('score');

        // H√†m kh·ªüi t·∫°o game
        function initGame() {
            score = 0;
            scoreEl.textContent = score;
            nextQuestion();
            setupEventListeners();
        }

        // H√†m t·∫°o c√¢u h·ªèi ti·∫øp theo
        function nextQuestion() {
            isAnswering = true;
            messageEl.textContent = '';
            messageEl.className = '';
            dinoAvatarEl.textContent = 'ü¶ñ';
            answerBtns.forEach(btn => btn.classList.remove('disabled'));

            // 1. T·∫°o s·ªë ng·∫´u nhi√™n t·ª´ 10 ƒë·∫øn 99
            currentNumber = Math.floor(Math.random() * 90) + 10;
            tensDigit = Math.floor(currentNumber / 10);
            onesDigit = currentNumber % 10;

            // 2. Hi·ªÉn th·ªã s·ªë l·ªõn (c√≥ t√¥ m√†u)
            bigNumberTensEl.textContent = tensDigit;
            bigNumberOnesEl.textContent = onesDigit;

            // 3. V·∫Ω c√°c kh·ªëi h√¨nh tr·ª±c quan
            drawBlocks(tensDigit, onesDigit);

            // 4. Ch·ªçn lo·∫°i c√¢u h·ªèi (h·ªèi Ch·ª•c hay h·ªèi ƒê∆°n v·ªã)
            questionType = Math.random() < 0.5 ? 'tens' : 'ones';

            if (questionType === 'tens') {
                questionTextEl.innerHTML = 'S·ªë n√†y c√≥ m·∫•y <span class="highlight-tens">CH·ª§C</span>?';
            } else {
                questionTextEl.innerHTML = 'S·ªë n√†y c√≥ m·∫•y <span class="highlight-ones">ƒê∆†N V·ªä</span>?';
            }

            // 5. T·∫°o ƒë√°p √°n
            generateAnswers();
        }

        // H√†m v·∫Ω c√°c kh·ªëi h√¨nh (thanh ch·ª•c v√† kh·ªëi ƒë∆°n v·ªã)
        function drawBlocks(t, o) {
            visualBlocksEl.innerHTML = '';
            
            // V·∫Ω thanh ch·ª•c
            const tensGroup = document.createElement('div');
            tensGroup.className = 'tens-group';
            for(let i=0; i<t; i++) {
                tensGroup.innerHTML += '<div class="ten-bar"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div>';
            }
            visualBlocksEl.appendChild(tensGroup);

            // V·∫Ω kh·ªëi ƒë∆°n v·ªã
            const onesGroup = document.createElement('div');
            onesGroup.className = 'ones-group';
            for(let i=0; i<o; i++) {
                onesGroup.innerHTML += '<div class="one-cube"></div>';
            }
            visualBlocksEl.appendChild(onesGroup);
        }

        // H√†m t·∫°o c√°c l·ª±a ch·ªçn ƒë√°p √°n tr√™n qu·∫£ tr·ª©ng
        function generateAnswers() {
            let correctAnswer = (questionType === 'tens') ? tensDigit : onesDigit;
            let answers = [correctAnswer];

            // T·∫°o 2 ƒë√°p √°n sai ng·∫´u nhi√™n (l√† s·ªë c√≥ 1 ch·ªØ s·ªë t·ª´ 0-9)
            while (answers.length < 3) {
                let wrong = Math.floor(Math.random() * 10);
                // ƒê√°p √°n sai kh√¥ng ƒë∆∞·ª£c tr√πng v·ªõi ƒë√°p √°n ƒë√∫ng v√† kh√¥ng tr√πng nhau
                if (!answers.includes(wrong)) {
                    answers.push(wrong);
                }
            }

            // X√°o tr·ªôn th·ª© t·ª± ƒë√°p √°n
            answers.sort(() => Math.random() - 0.5);

            // G√°n v√†o c√°c n√∫t
            answerBtns.forEach((btn, index) => {
                btn.textContent = answers[index];
            });
        }

        // Thi·∫øt l·∫≠p s·ª± ki·ªán click cho c√°c n√∫t
        function setupEventListeners() {
            answerBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    if (!isAnswering) return;
                    checkAnswer(parseInt(this.textContent));
                });
            });
        }

        // H√†m ki·ªÉm tra ƒë√°p √°n
        function checkAnswer(selectedVal) {
            isAnswering = false;
            answerBtns.forEach(btn => btn.classList.add('disabled')); // Kh√≥a n√∫t

            let correctAnswer = (questionType === 'tens') ? tensDigit : onesDigit;

            if (selectedVal === correctAnswer) {
                // ƒê√∫ng
                score += 1;
                scoreEl.textContent = score;
                messageEl.textContent = "Ch√≠nh x√°c! B√© gi·ªèi qu√°!";
                messageEl.className = "correct";
                dinoAvatarEl.textContent = 'ü¶ï'; // Kh·ªßng long vui
                // T·ª± ƒë·ªông chuy·ªÉn c√¢u sau 1.5s
                setTimeout(nextQuestion, 1500);
            } else {
                // Sai
                messageEl.textContent = `√îi sai r·ªìi! ƒê√°p √°n ƒë√∫ng l√† ${correctAnswer} nh√©.`;
                messageEl.className = "wrong";
                dinoAvatarEl.textContent = 'ü•≤'; // Kh·ªßng long bu·ªìn
                // T·ª± ƒë·ªông chuy·ªÉn c√¢u sau 2s ƒë·ªÉ b√© k·ªãp ƒë·ªçc ƒë√°p √°n ƒë√∫ng
                setTimeout(nextQuestion, 2000);
            }
        }

        // B·∫Øt ƒë·∫ßu game khi t·∫£i trang
        initGame();

    </script>
</body>
</html>
