<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zoo Safari Grammar Game</title>
    <style>
        :root {
            /* ƒê·ªïi b·∫£ng m√†u sang theme R·ª´ng xanh/V∆∞·ªùn th√∫ */
            --primary: #2e7d32; /* Xanh l√° ƒë·∫≠m */
            --secondary: #5d4037; /* N√¢u ƒë·∫•t */
            --accent: #ffeb3b; /* V√†ng t∆∞∆°i */
            --success: #2ecc71;
            --error: #c62828;
            --dark: #2c3e50;
            --bg-color: #e8f5e9; /* N·ªÅn xanh nh·∫°t */
        }

        body {
            font-family: 'Comic Sans MS', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; /* Font ch·ªØ vui nh·ªôn h∆°n */
            background-color: var(--bg-color);
            /* Th√™m h·ªça ti·∫øt l√° c√¢y m·ªù l√†m n·ªÅn n·∫øu mu·ªën */
            background-image: linear-gradient(rgba(255,255,255,0.8), rgba(255,255,255,0.8)), url('https://www.transparenttextures.com/patterns/arches.png');
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
        }

        #game-container {
            background: white;
            padding: 2rem;
            border-radius: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            text-align: center;
            width: 100%;
            max-width: 600px;
            border-top: 5px solid var(--primary);
            border-bottom: 5px solid var(--secondary);
        }

        h1 { color: var(--secondary); margin-bottom: 0.5rem; font-size: 2rem; }
        .score-board { font-size: 1.3rem; font-weight: bold; margin-bottom: 1.5rem; color: var(--primary); }

        #question-box {
            background: #fffde7; /* N·ªÅn v√†ng kem nh·∫π */
            padding: 1.5rem;
            border-radius: 15px;
            margin-bottom: 1.5rem;
            border: 3px dashed var(--primary);
            position: relative;
        }
        
        /* Th√™m icon ƒë·ªông v·∫≠t trang tr√≠ */
        #question-box::after {
            content: 'üêæ';
            position: absolute;
            top: -15px;
            right: -10px;
            font-size: 2rem;
            background: white;
            border-radius: 50%;
        }

        .sentence { font-size: 1.4rem; margin-bottom: 1.5rem; line-height: 1.4; color: var(--dark); }
        
        .options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        button {
            padding: 15px;
            font-size: 1.2rem;
            font-weight: bold;
            border: none;
            border-radius: 12px;
            background: var(--primary);
            color: white;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 4px #1b5e20;
        }

        button:hover { background: #388e3c; transform: translateY(-2px); box-shadow: 0 6px #1b5e20; }
        button:active { transform: translateY(2px); box-shadow: 0 2px #1b5e20; }

        #feedback {
            margin-top: 1rem;
            height: 30px;
            font-size: 1.1rem;
            font-weight: bold;
        }

        .explanation {
            background-color: #e0f2f1;
            padding: 10px;
            border-radius: 8px;
            font-size: 1rem;
            color: var(--secondary);
            margin-top: 15px;
            font-style: italic;
            border-left: 4px solid var(--primary);
        }
        
        /* N√∫t ch∆°i l·∫°i */
        .replay-btn {
            background: var(--secondary);
            box-shadow: 0 4px #3e2723;
        }
        .replay-btn:hover {
             background: #5d4037;
             box-shadow: 0 6px #3e2723;
        }
    </style>
</head>
<body>

<div id="game-container">
    <h1>ü¶Å Zoo Safari Grammar</h1>
    <div class="score-board">Score: <span id="score">0</span> üåü</div>

    <div id="question-box">
        <div id="game-content">
            <p class="sentence" id="sentence-display">Loading...</p>
            <div class="options" id="options-display"></div>
        </div>
    </div>

    <div id="feedback"></div>
    <div id="explanation-display" class="explanation" style="display: none;"></div>
</div>

<script>
    // D·ªØ li·ªáu c√¢u h·ªèi theo ch·ªß ƒë·ªÅ V∆∞·ªùn th√∫
    const quizData = [
        {
            sentence: "Look at the big lion! _____ is sleeping under a tree.",
            options: ["He", "Him"],
            correct: "He",
            explain: "ü¶Å 'He' l√† Ch·ªß ng·ªØ (Subject) ƒë·ª©ng tr∆∞·ªõc ƒë·ªông t·ª´ 'is sleeping'."
        },
        {
            sentence: "The monkeys are hungry. The zookeeper gives bananas to ____.",
            options: ["they", "them"],
            correct: "them",
            explain: "üêí 'them' l√† T√¢n ng·ªØ (Object) ƒë·ª©ng sau gi·ªõi t·ª´ 'to'. (Nh·ªØng ch√∫ kh·ªâ)"
        },
        {
            sentence: "I see a tall giraffe. _____ has a very long neck.",
            options: ["It", "Its"],
            correct: "It",
            explain: "ü¶í 'It' l√† Ch·ªß ng·ªØ (Subject) thay th·∫ø cho m·ªôt con v·∫≠t (the giraffe)."
        },
        {
            sentence: "My friends and I are at the zoo. _____ are watching the seals.",
            options: ["We", "Us"],
            correct: "We",
            explain: "üë®‚Äçüë©‚Äçüëß‚Äçüë¶ 'We' l√† Ch·ªß ng·ªØ (Subject) - bao g·ªìm 'My friends and I' (Ch√∫ng t√¥i)."
        },
        {
            sentence: "Mr. Ba is the zookeeper here. The animals love ____ very much.",
            options: ["he", "him"],
            correct: "him",
            explain: "üë®‚Äçüåæ 'him' l√† T√¢n ng·ªØ (Object) ch·ªâ nam gi·ªõi, ƒë·ª©ng sau ƒë·ªông t·ª´ 'love'."
        },
        {
            sentence: "That colorful parrot is looking at ____! (pointing to myself)",
            options: ["I", "me"],
            correct: "me",
            explain: "ü¶ú 'me' l√† T√¢n ng·ªØ (Object) ch·ªâ b·∫£n th√¢n m√¨nh, ƒë·ª©ng sau gi·ªõi t·ª´ 'at'."
        },
        {
            sentence: "Where is the mother elephant? Oh, there _____ is!",
            options: ["she", "her"],
            correct: "she",
            explain: "üêò 'she' l√† Ch·ªß ng·ªØ (Subject) d√πng cho con v·∫≠t gi·ªëng c√°i."
        }
    ];

    let currentQuestion = 0;
    let score = 0;
    let isAnswering = false;

    const sentenceEl = document.getElementById('sentence-display');
    const optionsEl = document.getElementById('options-display');
    const feedbackEl = document.getElementById('feedback');
    const scoreEl = document.getElementById('score');
    const explainEl = document.getElementById('explanation-display');

    function loadQuestion() {
        isAnswering = true;
        const data = quizData[currentQuestion];
        sentenceEl.innerText = data.sentence;
        optionsEl.innerHTML = '';
        feedbackEl.innerText = '';
        explainEl.style.display = 'none';
        explainEl.innerText = '';

        data.options.forEach(opt => {
            const btn = document.createElement('button');
            btn.innerText = opt;
            btn.onclick = () => checkAnswer(btn, opt);
            optionsEl.appendChild(btn);
        });
    }

    function checkAnswer(selectedBtn, selectedText) {
        if (!isAnswering) return; // NgƒÉn ch·∫∑n click nhi·ªÅu l·∫ßn
        isAnswering = false;

        const data = quizData[currentQuestion];
        const buttons = optionsEl.querySelectorAll('button');
        
        // V√¥ hi·ªáu h√≥a c√°c n√∫t sau khi ch·ªçn
        buttons.forEach(btn => btn.disabled = true);

        if (selectedText === data.correct) {
            score += 10;
            feedbackEl.innerHTML = "üéâ Correct! Great job! üéâ";
            feedbackEl.style.color = "var(--success)";
            selectedBtn.style.background = "var(--success)";
            selectedBtn.style.boxShadow = "0 4px #1e8e4e";
        } else {
            feedbackEl.innerText = "üôâ Oh no! Not quite right.";
            feedbackEl.style.color = "var(--error)";
            selectedBtn.style.background = "var(--error)";
            selectedBtn.style.boxShadow = "0 4px #8e1e1e";
            // Ch·ªâ ra ƒë√°p √°n ƒë√∫ng
            buttons.forEach(btn => {
                if (btn.innerText === data.correct) {
                     btn.style.background = "var(--success)";
                     btn.style.opacity = "0.7";
                }
            });
        }
        
        scoreEl.innerText = score;
        explainEl.innerText = data.explain;
        explainEl.style.display = "block";

        // Th·ªùi gian ch·ªù l√¢u h∆°n m·ªôt ch√∫t ƒë·ªÉ b√© ƒë·ªçc gi·∫£i th√≠ch
        setTimeout(() => {
            currentQuestion++;
            if (currentQuestion < quizData.length) {
                loadQuestion();
            } else {
                showResult();
            }
        }, 3500);
    }

    function showResult() {
        const finalScorePercent = Math.round((score / (quizData.length * 10)) * 100);
        let message = "";
        if (finalScorePercent === 100) message = "üèÜ Amazing! You are the Zoo Grammar King/Queen!";
        else if (finalScorePercent >= 70) message = "üëç Great job! You know your animals well!";
        else message = "üí™ Good effort! Let's visit the zoo again to practice!";

        document.getElementById('game-content').innerHTML = `
            <h2 style="color: var(--primary)">Adventure Complete!</h2>
            <p style="font-size: 1.5rem;">Your Total Score: <strong>${score}</strong> / ${quizData.length * 10}</p>
            <p style="color: var(--secondary); font-style: italic;">${message}</p>
            <button class="replay-btn" onclick="location.reload()" style="margin-top: 20px;">üîÑ Play Again</button>
        `;
        feedbackEl.innerText = "";
        explainEl.style.display = "none";
         document.getElementById('question-box').style.border = "none";
         document.getElementById('question-box').style.background = "transparent";
    }

    // B·∫Øt ƒë·∫ßu game
    loadQuestion();
</script>

</body>
</html>
